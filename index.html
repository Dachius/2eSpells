<!DOCTYPE html>
<html lang="en">
    <head>
        <title>2e Spell List</title>
        <style type="text/css">
            :root {
                color-scheme: dark;
                width: 100%;
                height: 100%;
            }
            #viewportWrapper {
                position: relative;
                width: 100%;
                height: 100%;
            }
            #headerWrapper {
                position: relative;
                width: 94%;
                left: 3%;
                right: 3%;
                height: 15vh;
                color:white;
            }
            #contentWrapper {
                position: relative;
                height: 75vh;
                width: 80%;
                left: 3%;
                right: 3%;
            }
            #listWrapper {
                width: 28em;
                height: 75vh;
                border:0;
            }
            #infoWrapper {
                left: 25em;
                height: 75vh;
                margin: -75vh 0 0 30em;
            }
        </style>
    </head>
    <body style="background-color:rgb(24, 26, 27)">
        <div id="viewportWrapper">
            <div id="headerWrapper">
                <div>
                    Hello!
                </div>
            </div>
            <div id="contentWrapper" id="content">
                <div id="listWrapper"></div>
                <div id="infoWrapper"></div>
            </div>
        </div>
    </body>

    <link href="tabulator/css/tabulator_midnight.css" rel="stylesheet">
    <script type="text/javascript" src="tabulator/js/tabulator.min.js"></script>
        
    <script>
        wizardTable();

        async function wizardTable(){
            const response = await fetch('json/wizard.json')
            var wizardData = await response.json();
            var table = new Tabulator("#listWrapper", {
                data:wizardData, //assign data to table
                height:"75vh",
                layout:"fitColumns",
                columns:[
                    {title:"Lvl", field:"level", sorter:"number", width:"15em"},
                    {title:"Name", field:"name", sorter:"alphanum", width:"56em"},
                    {title:"School", field:"school", sorter:"alphanum", width:"25em"}
                ]
            });
            
            table.on("rowClick", function(e, row){drawBox(e, row);});
        }

        function drawBox(e, row){
            var div = document.getElementById("infoWrapper");
            div.innerText = ""; //Wipe previous
            div.innerText += "Description: " + row.getData().description;
        }

        function makeFilter(type, param){
            var table = document.getElementById("listWrapper");
            table.setFilter("level", "=", "1");
        }
    </script>
</html>
